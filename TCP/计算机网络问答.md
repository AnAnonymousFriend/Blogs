**在浏览器输入www.google.com经历了几个协议 流程是怎么样的？**

1.浏览器对URL进行解析，从而生成发送给Web服务器的请求信息。（生成HTTP 协议

> 浏览器能解析网址并生成HTTP消息，但它本身并不具备将消息发送到网络中的功能，这一功能需要委托操作系统来实现。

2.根据域名向DNS服务器查询IP地址。

> 浏览器会调用解析器，解析器会向DNS服务器发送查询信息，DNS服务器会返回响应消息。解析器会取出IP地址，写入浏览器指定的内存地址。
>
> 解析器本身也不具备使用网络首发数据的功能。解析器调用协议栈，协议栈会通过网卡将消息发送给DNS服务器。

3.委托协议栈发送消息（使用TCP/IP协议

> 创建套接字
>
> 连接
>
> 发送数据包
>
> 断开连接



**Ping的原理是什么？基于哪一层的？**

Ping 它直接使用网络层的ICMP协议，但是它本身属于应用层。

> ICMP 全称为 Internet  Control Message Protocol （Internet 控制报文协议）
>
> 它利用ICMP协议包来侦测另一个主机是否可达。使用类型码为0的ICMP发请求，受到请求的主机则用类型码为8的ICMP回应。
>
> **ping**程序来计算间隔时间，并计算有多少个包被送达。



**TCP四次挥手有个 2MLS 为啥是2MLS**

> TCP 每一个连接会有一个默认的MLS时间，这个时间最短是30S，最长是两分钟。
>
> TCP四次挥手中，主动关闭时，停留在Time_wait  状态的持续时间是 最长分节声明期MSL（maximum segment lifttime）的两倍，所以称为2MSL。
>
> 防止旧TCP连接发送数据被接受到， 为了保证每成功建立一个TCP连接时，来自该连接的老连接在网络中消失。
>
> 保证TCP连接的远程被正确关闭。
>
> 网络中可能存在来自发送方的数据段，当这些发送方的数据段被服务端处理后又会向客户端发送响应，所以需要等待两倍的时间。



**TCP 的 MSS 是意思？**

> MSS（maximum segment size，最大分节大小），用于通知对端在每个分节中能发送的最大TCP数据量。
>
> MSS的目的是告诉对端其重组缓冲区大小的实际值，从而试图避免分片。



**TCP发送6000个字节 从a服务器到b服务器 ，两个服务器的mtu都是1500，那么这6000个字节是如何发出去的？**

> 最大传输单元，指一种通信协议的某一层上面所能通过的最大数据包大小（以字节为单位）。
>
> 在以太网通信中，MTU规定了经过网络层封装的数据包的最大长度。例如，若某个接口的MTU值为1500，则通过此接口传送的IP数据包的最大长度为1500字节。
>
> 注意：20 字节 IP 头 + 20 字节 TCP 头 + 1460 字节数据；
>IPV4 为20字节  IPV6为 40字节
> 
> TCP 会分成五节数据段发送



**UDP要实现和TCP一样稳定，怎么做？**

>思路： UPD不稳定是源于多个方面，首先它不会像TCP一样进行握手连接，其次UDP丢包时并不会告知发送方。
> 让UDP 像TCP 一样稳定，我们可以在UDP的IP头添加信息：
> 1.在IP头添加包信息，多个包使用同一token，告之接收方会有多个包发送。
> 2.定时检查是否受到完整的包，以序列号进行排序，超时接收方主动发送缺失包序号，通知发送放补包。



**了解过网卡offload是做什么的吗？**

> 为了解决性能问题就产生了TOE技术（TCP offload engine），将TCP连接过程中的相关计算转移到专用硬件上。
>
> offload 特性，主要是指将原本在协议栈中进行的IP分片，TCP分段，重组，checksum校验等操作，转移到网卡硬件中进行，降低系统CPU的消耗，提高处理性能。
>
> 详细公链可读：
>
> https://jaminzhang.github.io/hardware/NIC-offload-Introduction/
>
> http://blog.nsfocus.net/network-packets-analysis-nic-offload/



**TCP在第四次挥手的时候 一直丢包的时候怎么办？**

> 客户端在回复「ACK」后，会进入 TIME-WAIT 状态，开始长达 2MSL 的等待，服务端因为没有收到「ACK」的回复，会重试一段时间，直到服务端重试超时后主动断开。
>
> 或者等待新的客户端接入后，收到服务端重试的「FIN」消息后，回复「RST」消息，在收到「RST」消息后，复位服务端的状态。
>
> 详细公链可读：
>
> https://juejin.cn/post/6844904063964807182



**粘包和拆包听过吗？怎么解决？**

> 当应用层协议使用 TCP 协议传输数据时，TCP 协议可能会将应用层发送的数据分成多个包依次发送，而数据的接收方收到的数据段可能有多个『应用层数据包』组成，所以当应用层从 TCP 缓冲区中读取数据时发现粘连的数据包时，需要对收到的数据进行拆分。
>
> 粘包并不是 TCP 协议造成的，它的出现是因为应用层协议设计者对 TCP 协议的错误理解，忽略了 TCP 协议的定义并且缺乏设计应用层协议的经验。
>
> 解决方案：
>
> 应用层协议划分消息的边界，基于长度或者基于终结符。
>
> 我们可以基于特定的规则实现消息的边界，例如使用 JSON数据，或XML格式数据。接收方根据接收到的数据是否能被合法解析，来判断消息是否终结。
>
> 详细公链可读：https://draveness.me/whys-the-design-tcp-message-frame/



**多路复用和长链接的是什么意思？ 一样吗？**

> I/O 多路复用模型是效率较高的 I/O 模型，它可以同时阻塞监听了一组文件描述符的状态。很多高性能的服务和应用程序会使用这一模型来处理 I/O操作，例如 Redis 和 Nginx 。
>
> 
>
> 在HTTP中使用长链接需要在请求头中设置 Conection:keep-alive，它不会永久保持连接，它有一个设置时间，在这个时间内客户端和服务端通讯会复用已建立的连接。
>
> 详细公链可读：
>
> https://draveness.me/golang/docs/part3-runtime/ch06-concurrency/golang-netpoller/



**了解SPDY吗？**

> 一种开放的网络传输协议，谷歌开发，用来发送网页内容。基于TCP的应用层协议。
>
> 设计SPDY的目的在于降低网页的加载时间。通过优先级和多路复用，SPDY只需要创建一个TCP连接即可传送网页内容及图片等资源。SPDY中广泛应用了TLS加密，传输内容也均以gzip或DEFLATE格式压缩（HTTP的头部并不会压缩）。另外，除了像HTTP的网页服务器被动的等待浏览器发起请求外，SPDY的网页服务器还可以主动推送内容。
>
> SPDY是 HTTP/2的前身。但是它并不用于取代HTTP，它只是修改了HTTP的请求与应答在网络上传输的方式。
>
> 以上源于维基百科：https://zh.wikipedia.org/wiki/SPDY



**Server-Sent Events**

>Server-Sent Events 是一种服务器推送技术。
>
>它发送的不是一次性的数据包，而是一个数据流，会连续不断地发送过来。这时，客户端不会关闭连接，会一直等着服务器发送信的数据流。
>
>SSE 使用流信息向浏览器推送信息。它基于HTTP协议。



**简述 Grpc 它有什么样的功能？至少说5种**



302和304状态吗的区别

503和502呢？

拥塞算法有什么实现，你知道吗？

Websocket有做过吗？如何做ws的管理？

QUIC呢？有接触过吗？

arp是属于哪一层的？

BGP是哪一层的，什么协议实现的？

OSPF呢？ 有了解过吗？

BGP和OSPF各有什么优缺点？场景是什么？

那RIP呢？

tcp的滑动窗口是解决什么问题的？

IP包头TTL是什么意思？

http和https的区别？

可以谈谈 http的headers都有什么吗？Get和post的区别

https的请求过程是怎么样的啊？

iptable的实现有了解过吗？

NAT是什么意思？ 干什么的？

vlan,vxlan geneve，macvlan他们的区别是什么？

交换机属于哪一层？

dpdk了解吗？dpdk里面的mbuf是用来干嘛的？

路由地址分为 a ,b ,c三类。为什么要这么区分？ 怎么区分的？