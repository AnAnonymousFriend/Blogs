apiVersion: v1
kind: Pod
metadata:
  name: {{.AppName}}
  namespace: {{.Namespace}}
  annotations:
    yunhang-platform/tool: backup
spec:
  containers:
    - name:  {{.AppName}}
      image: {{.ImageName}} #镜像名固定
      args:
        - ./backuptool
      {{range $value := .Args}}
        - --{{$value}}
      {{end}}
      volumeMounts:
        {{range $key, $value := .VolumeMounts}}
        - mountPath: {{$value}}
          name: {{ $key }}
        {{end}}
  restartPolicy: Never
  volumes:
    {{range  .Volumes }}
      {{if eq .IsHostPath "true"}}
    - name: {{.Name}}
      hostPath:
        path: {{.VolumesPath}}
        type: Directory
    {{end}}
  {{end}}





