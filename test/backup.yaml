apiVersion: v1
kind: Pod
metadata:
  name: "{{.AppName}}"
  namespace: {{.Namespace}}
  annotations:
    yunhang-platform/tool: backup
spec:
  containers:
    - name:  "{{.AppName}}"
      image: "{{.ImageName}}" #镜像名固定
      args:
    {{range $value := .Args}}
      - --{{$value}}
    {{end}}
      volumeMounts:
        - mountPath: /backup/kubernetes/out/minio/
          name: minio-secret
        - mountPath: /backup/kubernetes/out/sftp/
          name: sftp-secret
  volumes:
    - name: minio-secret
      configMap:
        name: minio-creds-config
    - name: sftp-secret
      configMap:
        name: sftp-creds-config