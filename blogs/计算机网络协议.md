---
title: 网络协议
date: 2022-1-6 16:10:00
tags: [计算机网络,学习笔记,网络协议]
category: Go
---

# 协议

**协议三要素**

**语法：一段内容要符合一定的规则和格式。**

**语义：一段内容要代表某种意义。**

**顺序：一段线性的任务执行**



## **在浏览器输入www.google.com经历了几个协议 流程是怎么样的？**

浏览器会先去 hosts 文件中查找域名对应的 IP 地址，如果文件中不存在对应的 IP 地址，那么需要 **DNS 解析**。

DNS 会先在本地域名服务器中查询域名对应的 IP 地址，如果没有找到，会向根域名服务器发送一个请求。最终 DNS 会返回一个 IP 地址。



### **浏览器向 Web 服务器发送一个 HTTP 请求**

浏览器会打包它的请求，一般情况下会使用 **HTTP** ,有安全需求的会用到 **HTTPS**, 但是浏览器没有直接向服务器直接发送包的能力，浏览器委托操作系统完成这一任务。



**网络为什么要分层？**

复杂的程序都要分层，这是程序设计的要求。

**无类型域间选路（CIDR）**

将 32 位的 IP 地址一分为二，前面是 **网络号,**后面是**主机号。**例如 10.100.122.2/24 后面24的意思是，32位中，前24位是网络号，后8位是主机号。

**广播地址：**如果发送 10.100.122.255 ，如果发送这个地址，所有 10.100.122 网络里的机器都可以收到。

**子网掩码和 IP 地址进行 AND 计算可以得到网络号。**



Mac 地址更像是一个身份证，是一个唯一标识。它的唯一性设计是为了组网的时候，不同的网卡放在一个网络里面，可以不用担心冲突。但是没有定位功能。

Linux 默认的逻辑是：如果这是一个跨网段的调用，它不会直接将包发送到网络上，而是企图将包发送到网关。



**动态主机配置协议 （DHCP）**

自动配置 IP 地址的协议叫做 动态主机配置协议（Dynamic Host Configuration Protocol）,简称 DHCP。

如果是数据中心的服务器，IP 一旦配置好了，基本不会变。



**DHCP Discover**

新机器使用 IP 地址发送一个广播包，广播封装了 UDP, UDP封装了 BOOTP。DHCP 是 BOOTP 的增强版，如果抓包，可能看到的还是 BOOTP协议。

DHCP Server 接收到广播包，会给客户端分配一个 IP 地址，同时 DHCP Server 保留了此 IP 地址，这是为了防止重复颁发 IP地址。



**IP 地址的收回和续租**

客户机会在租期百分之五十的时候，直接向 DHCP Server 发送新的消息包，以此来续租。









## 学习资料

《趣谈网络协议》

《网络是怎么运行的？》 [计算机网络协议.md](计算机网络协议.md) 