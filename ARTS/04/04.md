2023年11月20日——2023年11月26日

Algorithm 是写一道算法题

**广度优先搜索**：能够找出两样东西之间的最短距离，它属于图算法中的一种。

工作原理：

1.创建一个队列，用于存储要检查的人

2.从队列中弹出一个人

3.检查这个人是否符合我们的要求

  3.1 是：结束

  3.2 否：将这个人的所能联系到的人加入队列，并回到第二步

4.如果队列为空，说明没有符合要求的人

![image-20231218151721481](https://raw.githubusercontent.com/AnAnonymousFriend/images/main/image-20231218151721481.png)





Review 是读一篇英文文章

原文路径： https://microservices.io/post/architecture/2023/08/20/how-modular-can-your-monolith-go-part-2.html

```
业务域和子域是如何协调的？
因为域需要协作才能正常工作，所以必须考虑域API设计和域之间的协作机制。在微服务中需要对子域的API颗粒度有一个把控。
细颗粒度的API
优点：支持实体之间具有OO风格的丰富领域模型
     不需要其他的领域的Dto及映射代码
     
缺点：一个关键的缺点是缺乏封装，因此域之间存在紧密设计时耦合的风险。如果实体是域API的一部分，那么想用脚本来代替实体时必须要团队协调，这会降低团队的自主性并减慢开发速度。
由于颗粒度太细，实现一个完整的业务模块可能需要多个子域API进行联合协作，这对测试来说是很麻烦的，它无法通过单独测试。
可能实体之间还会出现循环引用的问题，这会让子域之间依赖循环。
```



Technique/Tips 是分享一个小技术

```markdown
Ingress-Nginx Controller 中Rewrite可以配置重写

apiVersion: networking.k8s.io/v1
kind: Ingress
metadata:
  annotations:
    nginx.ingress.kubernetes.io/use-regex: "true"
    nginx.ingress.kubernetes.io/rewrite-target: /$2
  name: rewrite
  namespace: default
spec:
  ingressClassName: nginx
  rules:
  - host: rewrite.bar.com
    http:
      paths:
      - path: /something(/|$)(.*)
        pathType: ImplementationSpecific
        backend:
          service:
            name: http-svc
            port: 
              number: 80
              
              
通过配置use-regex 和rewrite-target 请求rewrite.bar.com/something 时会重定向到rewrite.bar.com，可以通过这种方式配置ingress来控制服务路由。但是要注意一定，如果是前端项目，JS读取文件不能写相对路径，因为它不会读取 http://rewrite.bar.com/something 而是直接读取http://rewrite.bar.com，那么JS文件读取就会变成 http://rewrite.bar.com/demo.js，这样无法定位到某个服务造成JS文件缺失。
解决方案：
使用Nginx再做一层代理，通过请求头中的Referer参数在Nginx中做判断（使用正则匹配），然后转发给集群的ingress端口，在转发时可以自己拼接请求路由，从而正确进行路由分发
```



Share 是分享一个观点

```
最近从播客里面了解到OpenAi 最初居然是一个非赢利组织，而且公司的愿景特别宏伟：Our mission is to ensure that artificial general intelligence benefits all of humanity.
可惜中国地区并不在使用该服务的范围内，可能未来可以通过微软和OpenAI的深度合作后曲线访问，但是不得不感叹一句，也许技术人的宏伟愿景也总是会受限于其他因素而无法覆盖。
```

